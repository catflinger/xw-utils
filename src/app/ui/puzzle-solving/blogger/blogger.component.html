<div class="row">
    <div class="col">
        <table class="table w-100" *ngIf="puzzle">
            <thead *ngIf="puzzle.publishOptions.textCols.length">
                <th>No.</th>
                <th *ngFor="let textCol of puzzle.publishOptions.textCols">{{textCol.caption}}</th>
                <th>Clue</th>
                <th>Comment</th>
                <th></th>
            </thead>
            <tbody>
                <ng-container *ngFor="let clue of puzzle.clues">
                    <tr class="border-top bg-light" (click)="onRowClick(clue)" *ngIf="!clue.highlight">
                        <td class="py-0">
                            {{clue.caption}}
                        </td>
                        <td class="font-weight-bold py-0" *ngFor="let textCol of puzzle.publishOptions.textCols; let i = index;">
                            {{ clue.answers[i] }}
                        </td>
                        <td class="py-0">
                            <app-clue-text [clue]="clue" [publishOptions]="puzzle.publishOptions"></app-clue-text>
                        </td>
                        <td class="py-0">
                            <quill-view [content]="clue.comment" format="object" theme="snow"></quill-view>
                        </td>
                        <td class="py-0">
                            <ng-container *ngIf="appSettings.general.showCommentValidation.enabled && clue.warnings.length && !clue.redirect">
                                <span class="text-warning"> {{clue.warnings[0]}}</span>
                            </ng-container>
                        </td>
                    </tr>

                    <tr *ngIf="clue.highlight">
                        <td class="p-0" [attr.colspan]="puzzle.publishOptions.textCols.length + 4">
                            <div class="border rounded">
                                <app-clue-annotator (close)="onEditorClose(clue, $event)"></app-clue-annotator>
                            </div>
                        </td>
                    </tr>
                </ng-container>
            </tbody>
        </table>
    </div>
</div>

<div class="row mt-5" *ngIf="puzzle">
    <div class="col">
        <button type="button" class="btn btn-primary mr-3" (click)="onContinue()">Continue</button>
        <button type="button" class="btn btn-primary mr-3" (click)="onSolver()" *ngIf="puzzle.capability.solveable">Open in solver</button>
        <button type="button" class="btn btn-primary mr-3" (click)="onEditClues()" style="display:none">Edit clues (temp)</button>
        <button type="button" class="btn btn-primary mr-3" (click)="onBack()">Back</button>
    </div>
</div>