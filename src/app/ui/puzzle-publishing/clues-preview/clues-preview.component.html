<div *ngIf="clues && includeGrid">
    <app-grid [options]="{ readonly: true, hideShading: false, hideHighlight: true }"></app-grid>
</div>

<table *ngIf="clues && publishOptions.layout === 'table'">
    <thead *ngIf="publishOptions.textCols.length">
        <tr class="border-top border-bottom">
            <td>No.</td>
            <td  *ngFor="let textCol of publishOptions.textCols">{{textCol.caption}}</td>
            <td>Comment</td>
        </tr>
    </thead>
    <tbody>
        <ng-container *ngFor="let clue of clues">
            <tr>
                <td [ngClass]="tdClass">
                    <span class="text-nowrap" [ngStyle]="makeClueStyle()">{{clue.caption}} </span>
                </td>
                <td [ngClass]="tdClass" *ngFor="let textCol of publishOptions.textCols; let i = index;">
                    <span class="text-nowrap" [ngStyle]="makeAnswerStyle()">{{clue.answers[i]}} </span>
                </td>
                <td [ngClass]="tdClass">
                    <app-clue-text [clueId]="clue.id"></app-clue-text>
                </td>
            </tr>
            <tr>
                <td [ngClass]="tdClass" [attr.colspan]="publishOptions.textCols.length + 1"></td>
                <td [ngClass]="tdClass">
                        <quill-view [content]="clue.comment" format="object" theme="snow"></quill-view>
                </td>
            </tr>
        </ng-container>
    </tbody>
</table>

<div *ngIf="clues && publishOptions.layout === 'list'">
    <ng-container *ngFor="let clue of clues">

        <div [ngStyle]="makeClueStyle()" [ngClass]="tdClass">
            <span class="text-nowrap">{{clue.caption}}.</span>&nbsp;&nbsp;<app-clue-text [clueId]="clue.id"></app-clue-text>
        </div>

        <ng-container *ngIf="publishOptions.textCols.length > 1; then multiRow; else singleRow"></ng-container>

        <ng-template #singleRow>
            <div class="text-nowrap" [ngClass]="tdClass">
                <span [ngStyle]="makeAnswerStyle()">{{clue.answers[0]}}</span>
            </div>
        </ng-template>
        
        <ng-template #multiRow>
            <ng-container *ngFor="let textCol of publishOptions.textCols; let i = index;">
                <div class="text-nowrap" [ngClass]="tdClass" *ngIf="clue.answers[i]">
                    <span>{{textCol.caption}}: </span> <span [ngStyle]="makeAnswerStyle()">{{clue.answers[i]}}</span>
                </div>
            </ng-container>
        </ng-template>

        <div [ngClass]="tdClass">
            <quill-view [content]="clue.comment" format="object" theme="snow"></quill-view>
        </div>
    </ng-container>
</div>
